# TextPin 更新日志

## v2.0.0 (2025-03-30)

### 🎉 重大更新

**核心架构重构**
- 从单窗口编辑器模式重构为多贴卡系统
- 移除旧的 MainWindow，改用 CardWindow + SettingsWindow
- 实现基于历史记录的数据流架构

### ✨ 新增功能

**贴卡系统**
- ✅ 全局快捷键（F4）一键创建贴卡
- ✅ 支持多贴卡同时显示，自动错开位置
- ✅ 贴卡自动定位到鼠标位置
- ✅ 自动高度调整（根据内容行数）
- ✅ 完整的拖动和调整大小支持
- ✅ 透明度控制（50-100%）

**智能剪贴板**
- ✅ 剪贴板自动监听与历史保存
- ✅ 智能过滤贴卡内部复制（双重检测机制）
- ✅ 历史记录自动去重（基于 content_hash）
- ✅ 实时历史更新（设置窗口打开时）

**设置系统**
- ✅ 统一的设置窗口（5 个标签页）
- ✅ 所有设置立即生效，无需重启
- ✅ 配置共享机制（避免多实例冲突）
- ✅ 快捷键自定义（支持 Ctrl、Alt、Shift 组合）

**文本编辑**
- ✅ 统一的查找替换对话框
- ✅ 支持正则表达式、大小写敏感、全词匹配
- ✅ 右键菜单快速访问
- ✅ 一键复制全部内容

**用户体验**
- ✅ 系统托盘支持
- ✅ 贴卡样式实时预览
- ✅ 上边距优化（20px），更易拖动
- ✅ 贴卡位置智能偏移（避免重叠）

### 🗑️ 移除功能

**已废弃模块**
- ❌ MainWindow（旧主窗口）
- ❌ SearchDialog（已被 FindReplaceDialog 替代）
- ❌ ReplaceDialog（已被 FindReplaceDialog 替代）
- ❌ HistoryPanel（已整合到 SettingsWindow）
- ❌ SearchEngine（不再需要）

### 🔧 优化改进

**性能优化**
- ✅ 历史记录查询优化（添加索引）
- ✅ 剪贴板监听效率提升
- ✅ 配置文件读写优化

**代码质量**
- ✅ 模块化架构，职责清晰
- ✅ 信号槽机制统一管理
- ✅ 配置共享，避免多实例问题
- ✅ 完善的错误处理

**用户体验**
- ✅ 所有设置立即生效
- ✅ 历史记录实时更新
- ✅ 贴卡创建响应速度 < 200ms
- ✅ 更清晰的日志输出

### 📝 文档更新

- ✅ 全新的 README.md（详细使用指南）
- ✅ 完整的 PRD.md（产品需求文档）
- ✅ 项目结构文档
- ✅ 配置说明文档
- ✅ 故障排除指南

### 🐛 Bug 修复

- ✅ 修复配置不同步问题（共享 ConfigManager 实例）
- ✅ 修复自动高度不生效问题
- ✅ 修复历史记录不实时更新问题
- ✅ 修复内部复制过滤失效问题
- ✅ 修复贴卡位置偏移过大问题

### 📦 依赖更新

```
PyQt6>=6.7.0
pyperclip>=1.8.2
```

---

## 未来版本规划

### v2.1.0（计划中）
- 深色主题支持
- 贴卡模板系统
- 贴卡吸附功能
- 文本处理工具
- 贴卡分组管理

### v3.0.0（长期规划）
- Markdown 渲染
- 代码高亮
- 跨平台支持
- 云同步
- 插件系统

---

**完整更新记录请查看 Git 提交历史**
